:root {
  /* BACKGROUND: Xanh dương đêm huyền ảo */
  --bg-gradient: radial-gradient(circle at 50% 30%, #1e3c72, #0f2027 80%);
  
  /* MÀU CHỦ ĐẠO */
  --gold: #ffd700;       /* Vàng kim loại sáng */
  --gold-dim: #c5a059;   /* Vàng đồng trầm hơn */
  
  /* BÌA THIỆP: Xanh Navy đậm */
  --cover-color: #002b49; 
  --cover-gradient: linear-gradient(135deg, #004e92, #000428);
  
  /* GIẤY BÊN TRONG: Màu kem sáng */
  --card-bg: #fffbf0;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  height: 100vh;
  background: var(--bg-gradient);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Playfair Display', serif;
  overflow: hidden;
  perspective: 2000px;
}

/* --- HIỆU ỨNG PHÁO HOA --- */
@keyframes explosion {
  0% { transform: scale(0); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: scale(1.5); opacity: 0; }
}

.firework-bg {
  position: absolute; width: 8px; height: 8px; border-radius: 50%;
  box-shadow: 
    0 0 0 4px rgba(255, 215, 0, 0.6), 
    0 0 0 8px rgba(0, 191, 255, 0.4), 
    0 0 20px rgba(255, 255, 255, 0.8);
  animation: explosion 2.5s infinite ease-out;
  opacity: 0; z-index: 1;
}

.firework-mini {
  position: absolute; width: 3px; height: 3px; background: white; border-radius: 50%;
  box-shadow: 
    0 -12px 0 #ffd700, 10px -8px 0 #ffd700, 12px 0 0 #fff, 
    10px 8px 0 #ffd700, 0 12px 0 #ffd700, -10px 8px 0 #fff, 
    -12px 0 0 #ffd700, -10px -8px 0 #ffd700;
  animation: spinPop 2s infinite linear; z-index: 5;
}

@keyframes spinPop {
  0% { transform: scale(0) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.5) rotate(45deg); opacity: 0; }
}

/* --- INTRO --- */
.intro { position: absolute; text-align: center; z-index: 100; transition: opacity 0.8s; }
.shimmer-text {
  font-size: 4rem; font-weight: 700; text-transform: uppercase; letter-spacing: 5px;
  background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
  background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  animation: shine 3s linear infinite;
  filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
}
@keyframes shine { to { background-position: 200% center; } }

/* --- BOOK CONTAINER --- */
.book-wrapper { opacity: 0; transform: translateY(30px); transition: all 1s ease-out; z-index: 10; }
.book-wrapper.visible { opacity: 1; transform: translateY(0); }

.book {
  position: relative; width: 340px; height: 500px;
  transform-style: preserve-3d;
  transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1);
  box-shadow: 0 30px 60px rgba(0,0,0,0.5);
}

/* TRẠNG THÁI MỞ (Mặc định cho Desktop) */
.book.open { transform: translateX(170px); }
.book.open .cover-leaf { transform: rotateY(-180deg); }

.cover-leaf {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  transform-style: preserve-3d; transform-origin: left;
  transition: transform 1.2s cubic-bezier(0.25, 1, 0.5, 1); z-index: 2;
}

.front, .back-cover, .body-card {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  border-radius: 6px; backface-visibility: hidden; overflow: hidden;
}

/* --- BÌA TRƯỚC --- */
.front {
  background: var(--cover-gradient);
  color: var(--gold); 
  border: 1px solid var(--gold);
  box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
  display: flex; justify-content: center; align-items: center; z-index: 2;
}
.front-content { 
  border: 2px solid var(--gold); padding: 20px; text-align: center; 
  width: 85%; height: 90%; display: flex; flex-direction: column; justify-content: center; 
  background: rgba(0,0,0,0.2); 
}
.logo-text { font-size: 24px; font-weight: bold; margin-bottom: 15px; color: #fff; text-transform: uppercase; letter-spacing: 2px; }
.front h2 { font-size: 32px; margin: 10px 0; color: var(--gold); }

/* --- TRANG TRÁI (BACK COVER) --- */
.back-cover {
  background: #000; transform: rotateY(180deg);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  box-shadow: inset -10px 0 30px rgba(0,0,0,0.6);
}
.back-cover img {
  position: absolute; width: 100%; height: 100%; object-fit: cover;
}
.overlay {
  position: absolute; width: 100%; height: 100%;
  background: linear-gradient(to top, rgba(0, 30, 60, 0.9), rgba(0, 30, 60, 0.4));
}
.left-content {
  position: relative; z-index: 2; text-align: center; color: #fff; padding: 20px; 
}
.left-content h3 { font-size: 30px; color: var(--gold); margin-bottom: 10px; text-transform: uppercase; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
.small-line { width: 40px; height: 2px; background: #fff; margin: 0 auto 10px; }

/* --- TRANG PHẢI (BODY) --- */
.body-card {
  background: var(--card-bg); color: #002b49; z-index: 1;
  box-shadow: inset 10px 0 20px rgba(0,0,0,0.05);
  display: flex; justify-content: center; align-items: center;
}
.card-content {
  padding: 30px; text-align: center; width: 100%; height: 100%;
  display: flex; flex-direction: column; justify-content: space-around;
  border: 1px solid rgba(197, 160, 89, 0.2); margin: 10px;
}
.body-card h2 { color: #b38728; font-size: 30px; margin-bottom: 5px; }
.line { width: 50px; height: 3px; background: var(--gold-dim); margin: 0 auto; }
.guest-name { font-weight: bold; font-size: 24px; color: #003366; margin: 10px 0; font-family: "Times New Roman", serif; }
.details { text-align: left; font-size: 15px; margin-left: 5px; line-height: 2; color: #333; }
.details p { border-bottom: 1px dashed #ddd; padding-bottom: 5px; }
.footer { font-style: italic; color: #888; font-size: 13px; margin-top: 10px; }
.hidden { display: none; }

/* --- NÚT MỞ THIỆP (NHỎ XINH) --- */
.open-btn {
  position: absolute;
  bottom: -55px; /* Sát thiệp */
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 16px;
  font-size: 13px;
  font-weight: normal; 
  letter-spacing: 0.5px;
  background: linear-gradient(to right, #c5a059, #a8853c);
  color: #fffbf0;
  font-family: 'Playfair Display', serif;
  border: 1px solid #b38f4b; 
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  z-index: 20;
  transition: all 0.3s ease;
  animation: pulseBtn 2.5s infinite;
}

.open-btn:hover {
  transform: translateX(-50%) translateY(-2px);
  background: linear-gradient(to right, #d4af6a, #b6924a);
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
  color: #fff;
}

@keyframes pulseBtn {
  0% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.4); }
  70% { box-shadow: 0 0 0 8px rgba(197, 160, 89, 0); } 
  100% { box-shadow: 0 0 0 0 rgba(197, 160, 89, 0); }
}

/* =========================================
   RESPONSIVE MOBILE (ĐÃ CHUẨN HÓA)
   ========================================= */

@media screen and (max-width: 768px) {
  
  /* 1. Thu nhỏ font chữ Intro */
  .shimmer-text { font-size: 2rem; line-height: 1.2; }
  .intro p { font-size: 11px !important; padding: 0 10px; }

  /* 2. Thiết lập kích thước thiệp cố định trên mobile để dễ tính toán */
  .book {
    width: 300px; 
    height: 460px;
    max-width: 85vw; /* Đảm bảo không tràn màn hình ngang */
  }
  
  /* Chỉnh lại chữ trong thiệp cho cân đối */
  .front h2 { font-size: 22px; }
  .logo-text { font-size: 16px; margin-bottom: 10px; }
  .body-card { padding: 15px; } 
  .body-card h2 { font-size: 20px; margin-bottom: 5px; }
  .guest-name { font-size: 16px; margin: 5px 0; }
  .details { font-size: 12px; line-height: 1.6; margin-left: 0; }
  .left-content h3 { font-size: 20px; }
  .left-content p { font-size: 12px; }

  /* 3. QUAN TRỌNG: CĂN GIỮA THIỆP KHI MỞ */
  .book.open {
    /* translateX(50%): Đẩy thiệp sang phải 50% kích thước của nó => Đưa gáy sách về tâm màn hình
       scale(0.52): Thu nhỏ lại để hiển thị trọn vẹn 2 trang */
    transform: translateX(50%) scale(0.52); 
  }

  /* 4. Điều chỉnh pháo hoa nền nhỏ lại */
  .firework-bg { transform: scale(0.6); }
  
  /* 5. Điều chỉnh nút bấm trên mobile */
  .open-btn {
    bottom: -45px;
    font-size: 11px;
    padding: 5px 12px;
  }
}

/* Hỗ trợ màn hình ngang (Landscape) */
@media screen and (max-width: 900px) and (orientation: landscape) {
  .book { height: 80vh; width: 55vh; }
  .book.open { transform: translateX(50%) scale(0.8); }
}
